<!DOCTYPE html>
	<script src="http://localhost:8080/socket.io/socket.io.js"></script>
<html>

<head>
	<title>Hello World Test</title>
</head>

<script type="text/javascript">
	////network functions ////
	var socket = io.connect('http://localhost:8080');
	var connected = false;
	var local_name = "anonymous";
	//socket.emit('testconnection');
	
	function submitname(form){
		//debugo("in submitname");
		var username = form.name.value;
		local_name = username;
		socket.emit('try_connect',username);
	}
	
	function submitMsg(form){
		var msg = form.msg.value;
		//debugo("in submitMsg");
		socket.emit('submitmsg',local_name,msg);
		//output(local_name + ": " + msg);
		var oBox = document.getElementById("sendid");
		oBox.value = "";
	}
	
	//basic testing and example function
	socket.on('testthis', function (data) {
		alert(data + " has joined the server.");
		});
	
	//Function that server calls on this client to tell it that it has connected with the username given
	socket.on('connected', function (data) {
		output("You have successfully joined the server.");
		addPlayers(data);
		//disable the join server button
		var button = document.getElementById("sendnameid");
		button.disabled = true;
	});
	
	//function srvr calls on this client when it wants to send a message(either from others or game)
	socket.on('recieveMsg', function (msg) {
		//debugo("localname = "+username+", msg = "+msg);
		output(msg);
	});
	
	//function called on this client when someone new connects to server
	socket.on('other_connected', function (data) {
		output(data[data.length -1] + " has joined the server.");
		addPlayers(data);
	});
	
	function test2(){
		socket.emit('test2s', [2,3]);
	}
	
	socket.on('test2c', function (data) {
		debugo(data.toString());
	});	
	
	
	//end network functions//
	
	//this function writes to the main output window
	function output(msg){
		var txtBox = document.getElementById("outputid");
		txtBox.value += "\n"+msg;
	}
	
	//this function writes to the debug window
	function debugo(output){
		//debug
		var txtBox = document.getElementById("debugid");
		txtBox.value += "\n"+output;
		//
	}
	//adds a player onto this clients players' panel
	function addPlayers(players){
		var txtBox = document.getElementById("players_id");
		txtBox.value = "Players:";
		for(var i = 0; i < players.length; i++){
			txtBox.value += "\n"+players[i];
		}
	}
	
	function removePlayer(plname){
	
	}
</script>

<body>
	<form name='sendname' action='' method='get' />
	<input type='text' name='name' value='' />
	<input type='button' value='Enter Name' id='sendnameid' onclick='submitname(this.form)' />
	
	<form method="post" action="">

	<br>
	<!-- main output textarea -->
	<textarea name="output" id="outputid" cols="36" rows="12">
	Connected to server
	</textarea>
	<br>
	<!-- main input/chat form -->
	<form name='sendmsg' action='' method='get' />
	<input type='text' name='msg' id='sendid' value='' />
	<input type='button' value='Send' onclick='submitMsg(this.form)' />
	
	<br>
	<!-- player display -->
	<textarea name="players" id="players_id" cols="25" rows="6">
	Players:
	</textarea>
	<br>
	<!-- debug output textarea -->
	<textarea name="comments" id="debugid" cols="25" rows="3">
	Debug Output:
	</textarea>
	
</body>
</html>